scitokens-cpp (1.4.0-1) unstable; urgency=medium

  * Add keycache.allow_in_memory config option with in-memory SQLite fallback
  * Add persistent anchor connection for shared in-memory SQLite database
  * Improve error messages when keycache file cannot be read or written
  * Add integration test for keycache not-writable error message
  * Improve cache directory permission tests to handle common deployment misconfigurations
  * Implement keycache location retrieval and update library to 0.0.3
  * Fix typo in SQLite file extension in integration and main tests

 -- Derek Weitzel <dweitzel@unl.edu>  Wed, 19 Feb 2026 00:00:00 +0000

scitokens-cpp (1.3.0-1) unstable; urgency=medium

  * Add scitokens-generate-jwks CLI for key generation in https://github.com/scitokens/scitokens-cpp/pull/186
  * Add environment variable configuration loading on library initialization in https://github.com/scitokens/scitokens-cpp/pull/190
  * Add per-issuer lock to prevent multiple concurrent queries against issuers without a known key in https://github.com/scitokens/scitokens-cpp/pull/180
  * Add negative cache for failed issuer lookups (preventing frequent re-queries) in https://github.com/scitokens/scitokens-cpp/pull/178
  * Add monitoring API for per-issuer validation statistics in https://github.com/scitokens/scitokens-cpp/pull/182
  * Add optional background thread for JWKS refresh in https://github.com/scitokens/scitokens-cpp/pull/192
  * Add keycache load, metadata, and delete APIs in https://github.com/scitokens/scitokens-cpp/pull/194
  * Revert "Fix memory leak in rs256_from_coords" by @djw8605 in https://github.com/scitokens/scitokens-cpp/pull/162
  * Add CTest-based integration test with JWKS server and TLS infrastructure by @Copilot in https://github.com/scitokens/scitokens-cpp/pull/184
  * Add devcontainer configuration for GitHub Codespaces by @Copilot in https://github.com/scitokens/scitokens-cpp/pull/188

 -- Brian Bockelman <bbockelman@morgridge.org> Thu, 11 Dec 2025 16:10:00 -0600

scitokens-cpp (1.2.0-1) unstable; urgency=medium

  * Fix segfault if the JSON parser cannot parse the JWKS
  * Fix float time claims issue and improve error handling
  * Fix security issue with malicious issuer handling in error messages
  * Improve JWTVerificationException message to include the invalid issuer
  * Update usage on verify command to make the TOKENFILE explicit
  * Read token for scitokens-verify from stdin
  * Set CURLOPT_NOSIGNAL option in SimpleCurlGet to prevent signal interruptions
  * Add asan value to the job name
  * Turn off building unit tests by default
  * Add cmake option SCITOKENS_WITH_ASAN which enables memory checking with the address sanitizer. Also enable this in CI so tests fail if they hit a memory leak or other memory problem
  * Fix memory leak in store_public_ec_key
  * Fix memory leaks in the unit tests
  * Fix memory leak in rs256_from_coords
  * Fix memory leak in scitokens_verify

 -- Derek Weitzel <dweitzel@unl.edu>  Fri, 05 Dec 2025 00:00:00 +0000

scitokens-cpp (1.1.3-1) stable; urgency=medium

  * Include cstdint import for jwt library to support newer compilers

 -- Derek Weitzel <dweitzel@unl.edu>  Mon, 24 Feb 2025 12:00:00 -0600

scitokens-cpp (1.1.2-1) stable; urgency=medium

  * Turn off CMAKE unity builds
  * Add a mutex around requesting public keys to stop overloading issuers

 -- Derek Weitzel <dweitzel@unl.edu>  Wed, 30 Oct 2024 12:00:00 -0600

scitokens-cpp (1.1.1-1) stable; urgency=medium

  * Improve error handling around the sqlite3 library
  * Fix test failures and compiler warnings

 -- Derek Weitzel <dweitzel@unl.edu>  Wed, 28 Feb 2024 12:00:00 -0600

scitokens-cpp (1.1.0-1) stable; urgency=medium

  * Allow the scitokens library user to setup a custom CA file
  * Fix typecast errors in scitoken_status_get_*() that caused async queries to fail
  * Fix logic error in deserialize_continue() that caused async deserialization to fail

 -- Tim Theisen <tim@cs.wisc.edu>  Tue, 07 Nov 2023 15:46:00 -0600

scitokens-cpp (1.0.2-1) stable; urgency=medium

  * Add support for API-configurable cache home
  * Fix enforcer_acl_free logic
  * scitokens_internal: catch matching exception type after jwt-cpp update

 -- Derek Weitzel <dweitzel@unl.edu>  Thu, 15 Jun 2023 12:00:00 -0500

scitokens-cpp (1.0.1-1) stable; urgency=medium

  * Fix bug in generate acls which would cause a timeout

 -- Derek Weitzel <dweitzel@unl.edu>  Wed, 26 Apr 2023 12:00:00 -0500

scitokens-cpp (1.0.0-1) stable; urgency=medium

  * Add async API for parsing and verifying tokens
  * Add configuration API
  * Make nbf claim optional for non-scitokens tokens
  * Update to OpenSSL 3.0

 -- Derek Weitzel <dweitzel@unl.edu>  Tue, 21 Mar 2023 10:18:59 -0500

scitokens-cpp (0.7.3-1) stable; urgency=medium

  * Retry failed key renewal every 5 minutes

 -- Derek Weitzel <dweitzel@unl.edu>  Tue, 01 Nov 2022 08:29:22 -0500

scitokens-cpp (0.7.2-1) stable; urgency=medium

  * Add curl timeout of 4 seconds for update, and 30 for expired keys

 -- Derek Weitzel <dweitzel@unl.edu>  Mon, 31 Oct 2022 15:35:17 -0500

scitokens-cpp (0.7.1-1) stable; urgency=medium

  * Add scitokens-* binaries to the package
  * Bug: close sqlite db handle on return

 -- Derek Weitzel <dweitzel@unl.edu>  Wed, 22 Jun 2022 11:26:18 -0500

scitokens-cpp (0.7.0-1) stable; urgency=medium

  * Changes from static analysis
  * If only one key is available, do not error on no kid
  * Support at+jwt profile

 -- Derek Weitzel <dweitzel@unl.edu>  Fri, 18 Feb 2022 13:16:18 -0600

scitokens-cpp (0.6.3-1) stable; urgency=medium

  * Add support for building Debian packages on the OpenSUSE Build System
  * Add patch to jwt-cpp to update its picojson dependency in order to
    enable it to compile on Debian 11 and Ubuntu 21.04
  * Fix el7 build by requiring epel-rpm-macros

 -- Dave Dykstra <dwd@fnal.gov>  Fri, 03 Sep 2021 12:00:00 -0500

scitokens-cpp (0.6.2-2) stable; urgency=medium

  * Make the build require cmake3 instead of cmake

 -- Dave Dykstra <dwd@fnal.gov>  Thu, 26 Aug 2021 12:00:00 -0500

scitokens-cpp (0.6.2-1) stable; urgency=medium

  * Correct WLCG compat for condor read permissions

 -- Dave Dykstra <dwd@fnal.gov>  Thu, 26 Aug 2021 12:00:00 -0500

scitokens-cpp (0.6.1-1) stable; urgency=medium

  * Fix vector resize for el8+ builds

 -- Derek Weitzel <dweitzel@unl.edu>  Thu, 20 May 2021 12:00:00 -0500

scitokens-cpp (0.6.0-2) unstable; urgency=medium

  * Fix empty libscitokens0 package

 -- Tim Theisen <tim@cs.wisc.edu>  Fri, 26 Mar 2021 08:11:00 -0500

scitokens-cpp (0.6.0-1) unstable; urgency=medium

  * Fix compilation errors on c++11
  * Update to jwt-cpp-0.4.0 vendor
  * Change scitoken profile name to match spec, scitoken:2.0

 -- Derek Weitzel <dweitzel@unl.edu>  Tue, 09 Mar 2021 13:45:00 -0600

scitokens-cpp (0.5.1-3) unstable; urgency=low

  * Updated packaging for Debian

 -- Tim Theisen <tim@cs.wisc.edu>  Sun, 28 Feb 2021 16:02:24 -0600

scitokens-cpp (0.5.1-1) unstable; urgency=low

  * Initial release.

 -- Tim Theisen <tim@cs.wisc.edu>  Fri, 04 Dec 2020 10:54:24 -0600
